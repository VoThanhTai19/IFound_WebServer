<a class="btn btn-primary mt-4 ml-4" href="/products" role="button">Quay lại</a>
<div class="container">
    <h1>Cập nhật sản phẩm</h1> 
    <form method="POST" action="/products/{{product._id}}?_method=PUT" enctype="multipart/form-data">
        <div class="form-group">
            <label for="product_name">Tên sản phẩm</label>
            <input name="product_name" value="{{product.name}}" type="text" class="form-control" id="product_name" placeholder="Nhập tên sản phẩm">
        </div>
        <div class="form-group">
            <label for="product_price">Giá sản phẩm</label>
            <input name="product_price" value="{{product.price}}" type="text" class="form-control" id="product_price" placeholder="Nhập giá">
        </div>
        <div class="form-group">
            <label for="product_image">Chọn ảnh</label>
            <input name="product_image" type="file" class="form-control-file" id="product_image" onchange="onChangeFile()">
            <img src="{{product.image}}" width="200" height="200" id="image-view" style="object-fit:cover"/>
        </div>
        <div class="form-group">
            <label for="product_category">Loại sản phẩm</label>
            <select class="form-control" name="category_id" id="category_id">
                {{#each categories}}
                    <option value="{{this._id}}">{{this.name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="form-group">
            <label for="product_status">Trạng thái</label>
            <select class="form-control" name="productStatus_id" id="category_id">
                {{#each productStatus}}
                    <option value="{{this._id}}">{{this.name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="form-group">
            <label for="product_desc">Mô tả</label>
            <textarea name="product_desc" class="form-control" id="product_desc" rows="3">{{product.description}}</textarea>
        </div>
        <button type="submit" class="mb-4 btn btn-primary">Lưu</button>
    </form>
</div>

<script>
    const onChangeFile = () => {
        const file = document.getElementById('product_image').files[0];
        const reader = new FileReader();
        reader.onload = e => {
            document.getElementById('image-view').src = e.target.result;
            document.getElementById('image-view').style.display = 'block';
        }
        reader.readAsDataURL(file);
    }
</script>

